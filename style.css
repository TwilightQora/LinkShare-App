/* ===== Base Theme / motion ===== */
:root{
  --bg:#f4fbf7; --bg-top:#e6fff3; --surface:#ffffff; --text:#0b1b13; --muted:#5b776a;
  --accent:#10b981;        /* emerald-500 */
  --accent-2:#059669;      /* emerald-600 */
  --ring:#34d399;          /* emerald-400 */
  --shadow-lg:0 18px 40px rgba(9, 20, 15,.16); --shadow-md:0 10px 30px rgba(9, 20, 15,.12); --shadow-sm:0 6px 16px rgba(9, 20, 15,.10);
  --dur:.25s; --ease:cubic-bezier(.22,.8,.36,1);
  --radius:20px;
  --pad: clamp(14px, 2.2vw, 24px);
}
html[data-theme="dark"]{
  --bg:#08120c; --bg-top:#0a1d13; --surface:#0c1711; --text:#e9fff4; --muted:#9CC7B2;
  --accent:#10b981; --accent-2:#059669; --ring:#34d399;
  --shadow-lg:0 18px 40px rgba(0,0,0,.45); --shadow-md:0 10px 30px rgba(0,0,0,.38); --shadow-sm:0 6px 16px rgba(0,0,0,.32);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; color:var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif;
  background: radial-gradient(1200px 300px at 50% -60px, var(--bg-top), transparent 70%), var(--bg);
  background-attachment: fixed; animation: bgFloat 16s ease-in-out infinite;
  font-size: clamp(14px, .95vw, 16px);
}
@keyframes bgFloat{0%{background-position:50% -60px,0 0}50%{background-position:52% -30px,0 0}100%{background-position:50% -60px,0 0}}
*{transition: background-color var(--dur) var(--ease), color var(--dur) var(--ease), border-color var(--dur) var(--ease), box-shadow var(--dur) var(--ease), transform .15s var(--ease)}

/* ===== Topbar ===== */
.topbar{
  height:64px; display:grid; grid-template-columns: auto 1fr auto; align-items:center; gap:14px;
  padding:0 var(--pad); padding-top: env(safe-area-inset-top);
  background: color-mix(in hsl, var(--surface) 94%, transparent);
  border-bottom:1px solid rgba(91,119,106,.18);
  position:sticky; top:0; z-index:40; backdrop-filter:saturate(140%) blur(10px);
}
.topbar.elevated{box-shadow:0 8px 24px rgba(9,20,15,.12)}
.brand{display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.2px}
.logo-icon{background:linear-gradient(135deg,var(--accent-2),var(--accent)); color:#fff; border-radius:12px; padding:6px 10px; box-shadow:var(--shadow-sm)}
.logo-text{font-weight:900}
.tabs{display:flex; gap:10px; overflow:auto; scrollbar-width:thin; -webkit-overflow-scrolling:touch; padding:0 8px}
.tabs::-webkit-scrollbar{height:8px}
.tabs::-webkit-scrollbar-thumb{background:rgba(91,119,106,.35); border-radius:8px}
.tab{position:relative; padding:10px 14px; border-radius:12px; text-decoration:none; color:var(--muted); font-weight:700; white-space:nowrap; flex:0 0 auto}
.tab:hover{color:var(--text); background:color-mix(in sRGB, var(--accent) 10%, transparent)}
.tab.active{color:var(--text); background:color-mix(in sRGB, var(--accent) 16%, transparent); box-shadow:inset 0 0 0 1px color-mix(in sRGB, var(--accent) 28%, transparent)}
.tab-ink{position:absolute; left:10px; right:10px; bottom:6px; height:2px; background:linear-gradient(90deg,var(--accent-2),var(--accent)); border-radius:2px; transform:scaleX(0); transition:transform .35s var(--ease)}
.tab.active .tab-ink{transform:scaleX(1)}
.actions{display:flex; align-items:center; gap:10px}
.btn{border:1px solid color-mix(in sRGB, var(--accent) 35%, transparent); background:linear-gradient(180deg, color-mix(in sRGB, var(--accent) 14%, transparent), color-mix(in sRGB, var(--accent) 10%, transparent)); color:var(--text); padding:12px 16px; border-radius:14px; font-weight:800; cursor:pointer; box-shadow:var(--shadow-sm); transform:translateY(0)}
.btn:hover{transform:translateY(-1px); box-shadow:var(--shadow-md)}
.btn:active{transform:translateY(0)}
.btn.primary{color:#fff; background:linear-gradient(135deg,var(--accent-2),var(--accent)); border-color:transparent}
.btn.ghost{background:transparent}
.btn.danger-ghost{border-color:#fecaca; background:linear-gradient(180deg, rgba(239,68,68,.08), rgba(239,68,68,.06)); color:#ef4444}
.back-btn{position:fixed; left:20px; top:20px; z-index:5}

/* Theme toggle */
.theme-toggle-2{width:60px;height:36px;border-radius:999px;border:1px solid color-mix(in sRGB, var(--accent) 35%, transparent);background:var(--surface);display:flex;align-items:center;justify-content:space-between;padding:0 6px;position:relative;overflow:hidden;box-shadow:var(--shadow-sm)}
.theme-toggle-2 .sun,.theme-toggle-2 .moon{width:20px;height:20px;transition:transform .35s var(--ease),opacity .35s var(--ease)}
html[data-theme="light"] .theme-toggle-2 .sun{opacity:1;transform:translateX(0)}
html[data-theme="light"] .theme-toggle-2 .moon{opacity:.35;transform:translateX(6px)}
html[data-theme="dark"] .theme-toggle-2 .sun{opacity:.35;transform:translateX(6px)}
html[data-theme="dark"] .theme-toggle-2 .moon{opacity:1;transform:translateX(0)}

/* ===== Inputs / Layout ===== */
.field{display:flex; flex-direction:column; gap:6px}
.field-label{font-size:.9rem; color:var(--muted)}
input, select{border:1px solid rgba(91,119,106,.25); border-radius:12px; padding:12px 12px; font:inherit; outline:none; background: rgba(255,255,255,.86); color: var(--text); min-height:44px}
html[data-theme="dark"] input, html[data-theme="dark"] select{background: rgba(12,23,18,.72); color: var(--text)}
input:focus, select:focus{border-color:transparent; box-shadow:0 0 0 4px color-mix(in sRGB, var(--ring) 65%, transparent)}
select:active{transform:scale(.998)}

.layout{min-height:calc(100dvh - 64px); display:grid; grid-template-columns: minmax(320px, 380px) 1fr; gap: clamp(14px, 2.2vw, 28px); padding: var(--pad)}
.left-pane{background: radial-gradient(140px 140px at 12% 6%, color-mix(in sRGB, var(--accent) 18%, transparent), transparent 60%), radial-gradient(160px 220px at 90% 90%, color-mix(in sRGB, var(--accent-2) 16%, transparent), transparent 70%), var(--surface); border-radius: var(--radius); box-shadow:var(--shadow-md); display:flex; align-items:center; justify-content:center; padding: clamp(16px, 2vw, 26px); position:sticky; top:calc(64px + 24px); height:calc(100dvh - 112px); overflow:hidden}
.phone-frame{width:min(94%, 360px); height:640px; border:12px solid rgba(231,241,235,.92); border-bottom-width:20px; border-top-width:28px; border-radius:36px; background: radial-gradient(120px 120px at 20% 10%, color-mix(in sRGB, var(--accent) 10%, transparent), transparent 60%), #f4f7f5; box-shadow: inset 0 0 0 2px #dfe8e2, 0 8px 20px rgba(9,20,15,.16), 0 0 0 0 color-mix(in sRGB, var(--accent) 18%, transparent); display:flex; align-items:flex-start; justify-content:center; padding:8px; overflow:auto; animation: phonePulse 6s var(--ease) infinite}
@keyframes phonePulse{0%{box-shadow:inset 0 0 0 2px #dfe8e2,0 8px 20px rgba(9,20,15,.16),0 0 0 0 color-mix(in sRGB, var(--accent) 18%, transparent)}50%{box-shadow:inset 0 0 0 2px #dfe8e2,0 8px 24px rgba(9,20,15,.20),0 0 28px 6px color-mix(in sRGB, var(--accent) 20%, transparent)}100%{box-shadow:inset 0 0 0 2px #dfe8e2,0 8px 20px rgba(9,20,15,.16),0 0 0 0 color-mix(in sRGB, var(--accent) 18%, transparent)}}
html[data-theme="dark"] .phone-frame{border-color:#1c2c24; background: radial-gradient(120px 120px at 20% 10%, color-mix(in sRGB, var(--accent) 12%, transparent), transparent 60%), #0b1510; box-shadow: inset 0 0 0 2px #1a2a23, 0 10px 22px rgba(0,0,0,.55), 0 0 0 0 color-mix(in sRGB, var(--accent) 20%, transparent)}

.card-zoom{transform:scale(var(--card-scale,1)); transform-origin: top center; transition: transform .25s var(--ease)}
.right-pane{background: radial-gradient(200px 110px at 90% -20px, color-mix(in sRGB, var(--accent) 14%, transparent), transparent 70%), var(--surface); border-radius: var(--radius); box-shadow:var(--shadow-md); min-height:640px; padding: clamp(16px, 2.2vw, 28px); position:relative; overflow:hidden}
.editor-head{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:16px; flex-wrap:wrap}
.row-inline{display:flex; gap:8px; flex-wrap:wrap}
.form-list{display:grid; gap:14px}
.link-item{border:1px solid rgba(91,119,106,.22); border-radius:14px; padding:14px; background:linear-gradient(180deg, rgba(255,255,255,.025), rgba(0,0,0,0)); box-shadow:var(--shadow-sm)}
.link-item:hover{transform:translateY(-2px); box-shadow:var(--shadow-md)}
.link-item-head{display:flex; align-items:center; justify-content:space-between; margin-bottom:12px; font-weight:700}
.remove-btn{background:transparent; border:none; color:#ef4444; cursor:pointer; font-weight:700; padding:6px 10px; border-radius:10px}
.remove-btn:hover{background:rgba(239,68,68,.12)}
.card-head{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px}

.panel.hidden{display:none}
.grid{display:grid; gap:12px; max-width:560px}
.appearance-grid{display:grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: clamp(12px, 2vw, 18px); margin-top:8px}
.appearance-card{border:1px solid rgba(91,119,106,.22); border-radius:14px; padding: clamp(12px, 2vw, 16px); background:linear-gradient(180deg, rgba(255,255,255,.025), rgba(0,0,0,0)); box-shadow:var(--shadow-sm); overflow:hidden}
.muted{color:var(--muted)}
.photo-row{display:flex; gap:16px; align-items:flex-end; flex-wrap:wrap}
.photo-row .grow{flex:1 1 260px}
.photo-uploader{display:flex; gap:10px; align-items:flex-end}
.photo-actions{display:flex; align-items:center; gap:8px}

/* Shape picker */
.shape-picker{display:flex; flex-wrap:wrap; gap:12px; max-width:100%; overflow:auto; padding:4px; border-radius:10px; scrollbar-width:thin}
.shape-picker::-webkit-scrollbar{height:8px}
.shape-picker::-webkit-scrollbar-thumb{background:rgba(91,119,106,.35); border-radius:8px}
.shape-opt{flex:0 0 88px; border:1px solid rgba(91,119,106,.25); border-radius:12px; padding:8px; background:var(--surface); display:grid; place-items:center; cursor:pointer; position:relative}
.shape-opt:hover{transform:translateY(-2px)}
.shape-opt .mini{width:44px; height:44px; background:linear-gradient(135deg,var(--accent-2),var(--accent)); border:3px solid #fff; box-shadow:var(--shadow-sm)}
.shape-opt[data-shape="circle"]  .mini{border-radius:50%}
.shape-opt[data-shape="rounded"] .mini{border-radius:22%}
.shape-opt[data-shape="squircle"] .mini{border-radius:35%}
.shape-opt[data-shape="hex"]      .mini{clip-path: polygon(25% 6%, 75% 6%, 100% 50%, 75% 94%, 25% 94%, 0 50%)}
.shape-opt[data-shape="diamond"]  .mini{clip-path: polygon(50% 0,100% 50%,50% 100%,0 50%)}
.shape-opt.active{box-shadow:0 0 0 3px color-mix(in sRGB, var(--ring) 65%, transparent); border-color:transparent}

/* ===== Card ===== */
.card{
  --card-font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Inter, Arial, sans-serif;
  --card-surface:#ffffff; --card-text:#0b1b13; --card-muted:#5b776a; --card-ring:var(--ring);
  --card-bar-start:#059669; --card-bar-end:#10b981; --card-radius:22px; --card-shadow: var(--shadow-lg);

  width:100%; max-width:360px; height:100%; overflow:auto;
  background:var(--card-surface); color:var(--card-text);
  border-radius:var(--card-radius); box-shadow:var(--card-shadow); position:relative; padding:88px 22px 22px;
  font-family:var(--card-font); contain:paint;
  transition: box-shadow .35s var(--ease), background-color .35s var(--ease), color .35s var(--ease)
}
.card-large{max-width:420px; height:auto}
.card-topbar{position:absolute; inset:0 0 calc(100% - 130px) 0; background:linear-gradient(135deg,var(--card-bar-start),var(--card-bar-end)); animation: barSheen 5s var(--ease) infinite}
@keyframes barSheen{0%,100%{filter:saturate(105%) brightness(1)}50%{filter:saturate(125%) brightness(1.06)}}

/* Avatar */
.avatar{--size:96px; position:absolute; left:50%; top:8px; transform:translateX(-50%); width:var(--size); height:var(--size); display:grid; place-items:center; background: radial-gradient(88px 88px at 30% 30%, #ffffff 0 60%, #effcf6 100%); color:var(--card-bar-start); font-weight:900; font-size:32px; letter-spacing:.5px; border:4px solid #fff; outline:3px solid var(--ring); overflow:hidden; animation: floaty 6s ease-in-out infinite}
@keyframes floaty{0%,100%{transform:translate(-50%,0)}50%{transform:translate(-50%,2px)}}
#avatarImg,#avatarImgFull{width:100%; height:100%; object-fit:cover; display:none}
#avatarTxt,#avatarTxtFull{display:block}
.avatar.has-image #avatarImg, .card-large .avatar.has-image #avatarImgFull{display:block}
.avatar.has-image #avatarTxt, .card-large .avatar.has-image #avatarTxtFull{display:none}

.card[data-avatar-shape="circle"]  .avatar{border-radius:50%}
.card[data-avatar-shape="rounded"] .avatar{border-radius:22%}
.card[data-avatar-shape="squircle"] .avatar{border-radius:35%}
.card[data-avatar-shape="hex"]     .avatar{clip-path: polygon(25% 6%, 75% 6%, 100% 50%, 75% 94%, 25% 94%, 0 50%); border-radius:0}
.card[data-avatar-shape="diamond"] .avatar{clip-path: polygon(50% 0,100% 50%,50% 100%,0 50%); border-radius:0}
.card[data-avatar-ring="ring"]  .avatar{outline:3px solid var(--ring)}
.card[data-avatar-ring="glow"]  .avatar{outline:3px solid var(--ring); box-shadow:0 0 24px color-mix(in sRGB, var(--ring) 55%, transparent)}
.card[data-avatar-ring="none"]  .avatar{outline:0; border:0; box-shadow:none}

/* Identity + Links */
.identity{margin-top:42px; text-align:center}
.identity h1{font-size:clamp(1.02rem, 1.2vw, 1.18rem); margin:8px 0 4px; font-weight:900}
.identity .email{color:var(--card-muted); text-decoration:none; display:inline-block; max-width:90%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap}
.links{margin-top:18px; display:grid; gap:12px}
.btn-link{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:14px 16px; text-decoration:none; color:#fff; font-weight:800; letter-spacing:.2px; border:1px solid rgba(255,255,255,.08); box-shadow:var(--shadow-sm); transition:transform .15s var(--ease), box-shadow .2s var(--ease), filter .2s var(--ease)}
.btn-link:hover{transform:translateY(-1px); filter:saturate(115%); box-shadow:var(--shadow-md)}
.card[data-link-shape="pill"]    .btn-link{border-radius:22px}
.card[data-link-shape="rounded"] .btn-link{border-radius:14px}
.card[data-link-shape="square"]  .btn-link{border-radius:6px}
.card[data-link-shape="cut"]     .btn-link{border-radius:0; clip-path: polygon(6% 0,100% 0,100% 94%,94% 100%,0 100%,0 6%)}

/* Icono en los links */
.btn-link .icon{
  width:24px;height:24px;border-radius:6px;background:rgba(255,255,255,.18);
  display:flex;align-items:center;justify-content:center;font-size:16px;overflow:hidden
}
.btn-link .icon img{width:100%;height:100%;object-fit:cover;border-radius:inherit}

/* ===== Platform color styles ===== */
.website{background:#0f172a}
.github{background:#0b1220}
.linkedin{background:#0a66c2}
.facebook{background:#1877f2}
.twitter{background:#0f1419}
.threads{background:#000}
.instagram{background: radial-gradient(45px 80px at 20% 140%,#feda75 0,#d62976 40%,#962fbf 65%,#4f5bd5 100%), #d62976}
.tiktok{background:#000}
.youtube{background:#ff0000}
.twitch{background:#9146ff}
.discord{background:#5865f2}
.whatsapp{background:#25d366}
.telegram{background:#229ED9}
.snapchat{background:#FFFC00; color:#111 !important}
.pinterest{background:#e60023}
.dribbble{background:#ea4c89}
.behance{background:#1769ff}
.medium{background:#000}
.reddit{background:#ff4500}
.stackoverflow{background:#f48024}
.codepen{background:#111}
.devto{background:#0a0a0a}
.gitlab{background:#fc6d26}
.kaggle{background:#20beff}
.spotify{background:#1db954}
.applemusic{background:linear-gradient(135deg,#fa243c,#b020ff)}
.soundcloud{background:#ff7700}
.steam{background:#171a21}
.itch{background:#fa5c5c}
.patreon{background:#ff424d}
.buymeacoffee{background:#ffdd00; color:#111 !important}
.paypal{background:#003087}
.calendly{background:#006bff}

/* ===== Modal / preview / toasts ===== */
.modal{position:fixed; inset:0; display:grid; place-items:center; z-index:80}
.modal.hidden{display:none}
.modal-backdrop{position:absolute; inset:0; background:rgba(2,6,23,.45); backdrop-filter: blur(6px); opacity:0; animation: fadeIn .25s var(--ease) forwards}
@keyframes fadeIn{to{opacity:1}}
.modal-dialog{position:relative; width:min(720px,92vw); background:var(--surface); color:var(--text); border-radius:16px; box-shadow:var(--shadow-lg); transform: translateY(14px) scale(.98); opacity:0; animation: dialogIn .25s var(--ease) forwards; overflow:hidden}
@keyframes dialogIn{to{transform:translateY(0) scale(1); opacity:1}}
.modal-head,.modal-foot{display:flex; align-items:center; justify-content:space-between; padding:12px 16px; border-color:rgba(91,119,106,.22); border-style:solid}
.modal-head{border-width:0 0 1px} .modal-foot{border-width:1px 0 0}
.modal-foot .spacer{flex:1}
.cropper{padding:14px; display:grid; gap:12px}
.crop-stage{width:min(560px, 82vw); height:min(560px, 82vw); max-height:420px; max-width:420px; margin:6px auto; background:#0d1324; position:relative; overflow:hidden; border-radius:16px; box-shadow: inset 0 0 0 1px rgba(255,255,255,.06)}
#cropImg{position:absolute; left:50%; top:50%; transform-origin:center; user-select:none; pointer-events:none}
.crop-mask{position:absolute; inset:0; background:radial-gradient(circle at center, transparent 34%, rgba(2,6,23,.55) 35%)}
.full-preview{position:fixed; inset:0; display:grid; place-items:center; background: radial-gradient(1200px 300px at 50% -60px, var(--bg-top), transparent 70%), var(--bg); z-index:50; perspective:1200px}
.full-preview.hidden{display:none}
.flip-page{transform-origin:right center; transform:rotateY(90deg); opacity:0; transition:transform .6s var(--ease), opacity .6s var(--ease)}
.full-preview.open .flip-page{transform:rotateY(0); opacity:1}
.full-preview.closing .flip-page{transform:rotateY(90deg); opacity:0}
.toasts{position:fixed; right:18px; bottom:18px; display:flex; flex-direction:column; gap:10px; z-index:90}
.toast{min-width:240px; max-width:340px; padding:12px 14px; border-radius:12px; color:#fff; font-weight:700; box-shadow:var(--shadow-md); transform: translateY(16px); opacity:0; animation: toastIn .25s var(--ease) forwards, toastOut .3s var(--ease) forwards var(--life, 2800ms)}
.toast.info{background:linear-gradient(135deg,#0ea5e9,#2563eb)}
.toast.success{background:linear-gradient(135deg,#10b981,#22c55e)}
.toast.error{background:linear-gradient(135deg,#ef4444,#f59e0b)}
@keyframes toastIn{to{transform:translateY(0); opacity:1}}
@keyframes toastOut{to{transform:translateY(12px); opacity:0}}

/* ===== Color Swatches ===== */
.color-swatch-grid{display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap: clamp(10px, 1.6vw, 14px)}
.color-field{display:flex; align-items:center; gap:12px; padding:12px; border:1px solid rgba(91,119,106,.22); border-radius:12px; background:var(--surface); box-shadow:var(--shadow-sm)}
.color-field .meta{flex:1; min-width:0}
.color-field .label{font-size:.9rem; color:var(--muted); line-height:1.1}
.color-field .value{font-weight:900; letter-spacing:.3px; font-size:.95rem; opacity:.9; overflow:hidden; text-overflow:ellipsis}
.swatch{width:52px; height:36px; border-radius:12px; border:1px solid rgba(0,0,0,.06); position:relative; box-shadow:inset 0 0 0 2px rgba(255,255,255,.35); cursor:pointer; flex:0 0 auto; transition: transform .12s var(--ease), box-shadow .2s var(--ease)}
.swatch:hover{transform:translateY(-1px); box-shadow:var(--shadow-md)}
.swatch:active{transform:translateY(0)}
.swatch.selected{outline:3px solid color-mix(in sRGB, var(--ring) 60%, transparent)}
.swatch .tick{position:absolute; right:6px; bottom:6px; width:16px; height:16px; border-radius:50%; background:#fff; display:grid; place-items:center; box-shadow:0 2px 6px rgba(0,0,0,.25); font-size:12px; line-height:1; color:#16a34a}
.swatch[data-key="barPreview"]{background:linear-gradient(135deg, var(--card-bar-start), var(--card-bar-end)) !important; border:1px solid rgba(0,0,0,.06); box-shadow:inset 0 0 0 1px rgba(255,255,255,.25)}
html[data-theme="dark"] .swatch{border-color:rgba(255,255,255,.06)}

/* ===== Breakpoints ===== */
@media (max-width: 1140px){
  .layout{grid-template-columns: 1fr; padding: clamp(12px, 2.6vw, 18px)}
  .left-pane{position:relative; top:auto; height:auto; order:2; margin-top:12px}
  .right-pane{order:1}
  .phone-frame{width:min(420px, 92vw); height: min(88vh, 680px)}
}
@media (max-width: 760px){
  .topbar{grid-template-columns: 1fr auto}
  .tabs{grid-column: 1 / -1; order: 3; margin: 8px -8px 0}
}
@media (max-width: 640px){
  .btn{padding:11px 14px}
  .appearance-grid{grid-template-columns: 1fr}
  .color-swatch-grid{grid-template-columns: 1fr}
  .tabs{gap:6px}
}
